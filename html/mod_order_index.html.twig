{% extends request.ajax ? "layout_blank.html.twig" : "layout_default.html.twig" %}
{% set products = guest.product_get_list %}
{% import "macro_functions.html.twig" as mf %}
{% block meta_title %}{{ 'Order'|trans }}{% endblock %}
{% set loader_nr = request.loader | default("8")%}
{% set loader_url = ('img/assets/loaders/loader'~loader_nr~'.gif') %}
{% block page_header %}{{ 'Select Product'|trans }}&nbsp;<span class="badge bg-blue-lt">{{ products.list|length }} {{ 'Items'|trans }}</span>{% endblock %}
{% block page_subheader %}{{ 'Choose products we offer for selling'|trans }}{% endblock %}
{% block body_class %}order-index{% endblock %}
{% block content_before %}{% endblock %}
{% block content %}
<div class="row row-deck row-cards mb-3">
   {% for i, category in guest.product_category_get_list.list %}
   <div class="col-md-12">
      <div class="card">
         <div class="card-body">
            <h2>{{ category.title }}</h2>
            <span>{{ category.description|markdown }}</span>
            <div class="datagrid">
               {% for i, product in category.products|sort((a, b) => a.priority <=> b.priority) %}
               <div class="datagrid-item">
                  <div class="datagrid-content"><a href="{{ 'orderbutton'|link({ 'order': product.id, 'show_custom_form_values': request.show_custom_form_values }) }}">{{ product.title }}</a></div>
               </div>
               {% endfor %}
            </div>
         </div>
      </div>
   </div>
   {% endfor %}
</div>
{% endblock %}